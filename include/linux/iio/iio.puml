!ifndef IIO_INCLUDED
!define IIO_INCLUDED
@startuml

class iio_chan_spec_ext_info {
    __public member__
    const char *name;
    enum iio_shared_by shared;
    uintptr_t private;
    __public method__
    ssize_t (*read)(struct iio_dev *, uintptr_t private,struct iio_chan_spec const *, char *buf);
    ssize_t (*write)(struct iio_dev *, uintptr_t private,struct iio_chan_spec const *, const char *buf,size_t len);
}

class iio_chan_spec <<iio.puml>> {
    enum iio_chan_type	type
    int			channel
    int			channel2
    unsigned long		address
    int			scan_index
    struct {
    	char	sign
    	u8	realbits
    	u8	storagebits
    	u8	shift
    	u8	repeat
    	enum iio_endian endianness
    } scan_type
    long			info_mask_separate
    long			info_mask_separate_available
    long			info_mask_shared_by_type
    long			info_mask_shared_by_type_available
    long			info_mask_shared_by_dir
    long			info_mask_shared_by_dir_available
    long			info_mask_shared_by_all
    long			info_mask_shared_by_all_available
    const struct iio_event_spec *event_spec
    unsigned int		num_event_specs
    const struct iio_chan_spec_ext_info *ext_info
    const char		*extend_name
    const char		*datasheet_name
    unsigned		modified:1
    unsigned		indexed:1
    unsigned		output:1
    unsigned		differential:1
}
iio_chan_spec o-- iio_chan_spec_ext_info

class iio_mount_matrix <<iio.puml>> {
    __public member__
    const **char ***rotation[9]
}

class iio_info <<iio.puml>> {
    __public member__
    const **struct attribute_group**	*event_attrs
    const **struct attribute_group**	*attrs
    
    __public method__
    int **(*read_raw)**(struct iio_dev *indio_dev, struct iio_chan_spec const *chan,int *val,int *val2,long mask)
    int **(*read_raw_multi)**(struct iio_dev *indio_dev,struct iio_chan_spec const *chan,int max_len,int *vals,int *val_len,long mask)
    int **(*read_avail)**(struct iio_dev *indio_dev,struct iio_chan_spec const *chan,const int **vals,int *type,int *length,long mask)
    int **(*write_raw)**(struct iio_dev *indio_dev,struct iio_chan_spec const *chan,int val,int val2,long mask)
    int **(*read_label)**(struct iio_dev *indio_dev,struct iio_chan_spec const *chan,char *label)
    int **(*write_raw_get_fmt)**(struct iio_dev *indio_dev,struct iio_chan_spec const *chan,long mask)
    int **(*read_event_config)**(struct iio_dev *indio_dev,const struct iio_chan_spec *chan,enum iio_event_type type,enum iio_event_direction dir)
    int **(*write_event_config)**(struct iio_dev *indio_dev,const struct iio_chan_spec *chan,enum iio_event_type type,enum iio_event_direction dir,int state)
    int **(*read_event_value)**(struct iio_dev *indio_dev,const struct iio_chan_spec *chan,enum iio_event_type type,enum iio_event_direction dir,enum iio_event_info info, int *val, int *val2)
    int **(*write_event_value)**(struct iio_dev *indio_dev,const struct iio_chan_spec *chan,enum iio_event_type type,enum iio_event_direction dir,enum iio_event_info info, int val, int val2)
    int **(*validate_trigger)**(struct iio_dev *indio_dev,struct iio_trigger *trig)
    int **(*update_scan_mode)**(struct iio_dev *indio_dev,const unsigned long *scan_mask)
    int **(*debugfs_reg_access)**(struct iio_dev *indio_dev,unsigned reg, unsigned writeval,unsigned *readval)
    int **(*of_xlate)**(struct iio_dev *indio_dev,const struct of_phandle_args *iiospec)
    int **(*hwfifo_set_watermark)**(struct iio_dev *indio_dev, unsigned val)
    int **(*hwfifo_flush_to_buffer)**(struct iio_dev *indio_dev,unsigned count)
}

class iio_dev <<iio.puml>> {
    __public member__
    int				modes
    int				currentmode
    struct device			dev
    struct iio_buffer		*buffer
    int				scan_bytes
    struct mutex			mlock
    const unsigned long		*available_scan_masks
    unsigned			masklength
    const unsigned long		*active_scan_mask
    bool				scan_timestamp
    struct iio_trigger		*trig
    struct iio_poll_func		*pollfunc
    struct iio_poll_func		*pollfunc_event
    struct iio_chan_spec const	*channels
    int				num_channels
    const char			*name
    const char			*label
    const struct iio_info		*info
    const struct iio_buffer_setup_ops	*setup_ops
    void				*priv
}
iio_dev o-- iio_chan_spec
iio_dev o-- iio_info
iio_dev --> iio_mount_matrix : use iio_mount_matrix

@enduml
!endif

